<%= render 'shared/navbar_unauthenticated' %>

<div id="start">
  <div class="container text-center">
    <h1>MY BLOG</h1>
    <h2>MAKE YOUR OWN BLOG</h2>

    <img id="leaf-design" src="/assets/leaf-structure.png" onload="getPixels(this);changeColor();">
  </div>
</div>

<div id="features">
  <div class="container">
    <h2>Features</h2>

    <div class="panel panel-default">
      <div class="panel-body">
        Check out the following features.
      </div>
    </div>
    
    <div class="row">
      <div class="col-md-6">
        <div class="col-md-2 text-center">
          <i class="fa fa-arrows-alt fa-5x"></i>
        </div>
        <div class="col-md-10">
          <h3>Responsive</h3>
          <p>Lorem Ipsum jest tekstem stosowanym jako przykładowy wypełniacz w przemyśle poligraficznym. Został po raz pierwszy użyty w XV w. przez nieznanego drukarza do wypełnienia tekstem próbnej książki. Pięć wieków później zaczął być używany przemyśle</p>
        </div>
      </div>
      <div class="col-md-6">
        <div class="col-md-2 text-center">
          <i class="fa fa-html5 fa-5x"></i>
        </div>
        <div class="col-md-10">
          <h3>Html 5</h3>
          <p>Lorem Ipsum jest tekstem stosowanym jako przykładowy wypełniacz w przemyśle poligraficznym. Został po raz pierwszy użyty w XV w. przez nieznanego drukarza do wypełnienia tekstem próbnej książki. Pięć wieków później zaczął być używany przemyśle</p>
        </div>
      </div>
      <div class="col-md-6">
        <div class="col-md-2 text-center">
          <i class="fa fa-line-chart fa-5x"></i>
        </div>
        <div class="col-md-10">
          <h3>Speed up</h3>
          <p>Lorem Ipsum jest tekstem stosowanym jako przykładowy wypełniacz w przemyśle poligraficznym. Został po raz pierwszy użyty w XV w. przez nieznanego drukarza do wypełnienia tekstem próbnej książki. Pięć wieków później zaczął być używany przemyśle</p>
        </div>
      </div>
      <div class="col-md-6">
        <div class="col-md-2 text-center">
          <i class="fa fa-cog fa-5x"></i>
        </div>
        <div class="col-md-10">
          <h3>Customise</h3>
          <p>Lorem Ipsum jest tekstem stosowanym jako przykładowy wypełniacz w przemyśle poligraficznym. Został po raz pierwszy użyty w XV w. przez nieznanego drukarza do wypełnienia tekstem próbnej książki. Pięć wieków później zaczął być używany przemyśle</p>
        </div>
      </div>
      <div class="col-md-6">
        <div class="col-md-2 text-center">
          <i class="fa fa-user fa-5x"></i>
        </div>
        <div class="col-md-10">
          <h3>Account</h3>
          <p>Lorem Ipsum jest tekstem stosowanym jako przykładowy wypełniacz w przemyśle poligraficznym. Został po raz pierwszy użyty w XV w. przez nieznanego drukarza do wypełnienia tekstem próbnej książki. Pięć wieków później zaczął być używany przemyśle</p>
        </div>
      </div>
      <div class="col-md-6">
        <div class="col-md-2 text-center">
          <i class="fa fa-mobile fa-5x "></i>
        </div>
        <div class="col-md-10">
          <h3>Mobile devices</h3>
          <p>Lorem Ipsum jest tekstem stosowanym jako przykładowy wypełniacz w przemyśle poligraficznym. Został po raz pierwszy użyty w XV w. przez nieznanego drukarza do wypełnienia tekstem próbnej książki. Pięć wieków później zaczął być używany przemyśle</p>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="customise">
  <div class="container">
    <h2>Customise Blog</h2>
    
    <div class="panel panel-default">
      <div class="panel-body">
        Customize the look of your blog, as in this example.
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <form class="form-horizontal" role="form">
          <div class="form-group">
            <label for="background-color" class="col-sm-4 control-label">Background color</label>
            <div class="col-sm-8">
              <input id="background-color" type="text" class="form-control colorwell" value="#111111">
            </div>
          </div>
          <div class="form-group">
            <label for="text-color" class="col-sm-4 control-label">Text color</label>
            <div class="col-sm-8">
              <input id="text-color" type="text" class="form-control colorwell" value="#ffffff">
            </div>
          </div>
          <div class="form-group">
            <label for="block-color" class="col-sm-4 control-label">Block color</label>
            <div class="col-sm-8">
              <input id="block-color" type="text" class="form-control colorwell" value="#c4ff61">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-4 col-sm-8">
              <a href="#start" class="btn btn-success" onclick="changeColor()">Save changes</a>
            </div>
          </div>
        </form>
      </div>
      <div class="col-md-offset-1 col-md-5">
        <div id="colorpicker"></div>
      </div>
    </div>
  </div>
</div>



<footer class="text-center">
  <p>copyright &copy; by Paweł Puchalski</p>
</footer>

<script type="text/javascript">
  
  
  
  var mug = document.getElementById("leaf-design");
  var canvas = document.createElement("canvas");
  var ctx = canvas.getContext("2d");
  var originalPixels = null;
  var currentPixels = null;

  function getPixels(img)
  {
    canvas.width = img.width;
    canvas.height = img.height;

    ctx.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight, 0, 0, img.width, img.height);
    originalPixels = ctx.getImageData(0, 0, img.width, img.height);
    currentPixels = ctx.getImageData(0, 0, img.width, img.height);

    img.onload = null;
  }

  function hexToRGB(hex)
  {
    var long = parseInt(hex.replace(/^#/, ""), 16);
    return {
      R: (long >>> 16) & 0xff,
      G: (long >>> 8) & 0xff,
      B: long & 0xff
    };
  }

  function changeColor()
  {
    if(!originalPixels) return; // Check if image has loaded
    var newColor = hexToRGB(document.getElementById("block-color").value);

    for(var I = 0, L = originalPixels.data.length; I < L; I += 4)
    {
      if(currentPixels.data[I + 3] > 0) // If it's not a transparent pixel
      {
        currentPixels.data[I] = originalPixels.data[I] / 255 * newColor.R;
        currentPixels.data[I + 1] = originalPixels.data[I + 1] / 255 * newColor.G;
        currentPixels.data[I + 2] = originalPixels.data[I + 2] / 255 * newColor.B;
      }
    }

    ctx.putImageData(currentPixels, 0, 0);
    mug.src = canvas.toDataURL("image/png");

    $('#start').css('background-color', $('#background-color').css('background-color'));
    $('#start').children('.container').css('color', $('#text-color').css('background-color'));
  }
  
  
  
  
  

  $(document).ready(function() {
    
    
    
    
    

    //$('#colorpicker').farbtastic('#background-color');

    var f = $.farbtastic('#colorpicker');

    var selected;
    $('.colorwell')
    .each(function () { f.linkTo(this); $(this).css('opacity', 0.75); })
    .focus(function() {
      if (selected) {
        $(selected).css('opacity', 0.75).removeClass('colorwell-selected');
      }
      f.linkTo(this);
      p.css('opacity', 1);
      $(selected = this).css('opacity', 1).addClass('colorwell-selected');
    });
  });
</script>
